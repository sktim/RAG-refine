# プロジェクト概要

このドキュメントは、HyperGraphRAG プロジェクトの全体的な構造、主要コンポーネント、および一般的なワークフローの概要を説明します。

## トップレベルディレクトリ構造

プロジェクトは、主に以下のトップレベルディレクトリで構成されています。

*   **/hypergraphrag**: コアとなる HyperGraphRAG システムの実装が含まれています。これには、知識ハイパーグラフの構築、クエリ処理、LLM との連携などの機能が含まれます。
*   **/evaluation**: HyperGraphRAG システムの評価フレームワークが含まれています。これには、評価データセット、評価スクリプト、および SimCSE などの関連ツールが含まれます。
*   **ルートディレクトリ**: プロジェクトのメイン `README.md`、設定ファイル (`requirements.txt` など)、および基本的な使用例を示すサンプルスクリプト (`script_construct.py`, `script_query.py`) が配置されています。

## 主要コンポーネント

### 1. HyperGraphRAG コアシステム (`/hypergraphrag`)

このコンポーネントは、Retrieval-Augmented Generation (RAG) のための主要なロジックを担います。主な機能は以下の通りです。

*   **データ取り込みと知識ハイパーグラフ構築**: 入力テキストから情報を抽出し、エンティティとそれらの間の関係性からなる知識ハイパーグラフを構築します。
*   **クエリ処理**: ユーザーの質問を解釈し、構築された知識ハイパーグラフと関連するテキストチャンクから関連情報を検索します。
*   **LLM との連携**: 検索された情報をコンテキストとして大規模言語モデル (LLM) に提供し、最終的な回答を生成します。
*   **柔軟なストレージ**: キーバリューストア、ベクトルデータベース、グラフデータベースなど、様々なストレージバックエンドをサポートします。

### 2. 評価フレームワーク (`/evaluation`)

このコンポーネントは、HyperGraphRAG システムの性能を評価し、ベースラインと比較するためのツールとスクリプトを提供します。

*   **評価スクリプト**: EM (Exact Match)、F1 スコア、R-Sim (Retrieval Similarity)、Gen-Score (Generation Score) などのメトリクスを計算します。
*   **データセット管理**: 評価用のコンテキストデータと質問データセットの管理構造を提供します。
*   **SimCSE 統合**: R-Sim メトリック計算のために SimCSE モデルを利用します。
*   **比較評価**: HyperGraphRAG を、標準的な RAG や検索なしの生成といったベースライン手法と比較評価する仕組みを提供します。

### 3. サンプルスクリプト (ルートディレクトリ)

基本的な使用方法を示すための Python スクリプトです。

*   `script_construct.py`: `example_contexts.json` から知識ハイパーグラフを構築する簡単な例です。
*   `script_query.py`: 構築されたグラフに対してサンプルクエリを実行する簡単な例です。

## 一般的なワークフロー

HyperGraphRAG プロジェクトの一般的な利用フローは以下の通りです。

1.  **データ取り込み**: テキストデータ (例: `example_contexts.json`) をシステムに提供します。
2.  **知識ハイパーグラフ構築**: `HyperGraphRAG.insert()` メソッドなどを利用して、入力データからエンティティ、ハイパーエッジ (知識の断片や関係性) を抽出し、設定されたデータベース (KV ストア、ベクトルDB、グラフDB) に格納します。このプロセスで、テキストはチャンク化され、エンティティ間の関係性がグラフ構造として表現されます。
3.  **クエリ**: ユーザーが質問を入力します (`HyperGraphRAG.query()` メソッドなど)。
4.  **コンテキスト検索**: システムは質問を解析し、関連するキーワードを特定します。これらのキーワードを元に、ベクトルデータベース (エンティティやハイパーエッジ用) やグラフデータベースを検索し、関連性の高い情報を取得します。検索モード (local, global, hybrid) によって、検索戦略が異なります。
5.  **回答生成**: 取得された情報 (エンティティ、関係性、元のテキストチャンク) をコンテキストとして LLM に渡し、ユーザーの質問に対する回答を生成します。

## README ファイルの役割

*   **`README.md` (ルート)**: プロジェクト全体の概要、セットアップ手順、基本的な使用方法 (クイックスタート)、および引用情報を提供します。プロジェクトへの最初の入り口となるドキュメントです。
*   **`evaluation/README.md`**: 評価フレームワークの詳細なセットアップ手順、評価の実行ステップ、および関連するデータセットの準備について説明します。
